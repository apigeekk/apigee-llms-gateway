<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<AssignMessage continueOnError="false" enabled="true" name="AM-Gemini">
    <DisplayName>AM-Gemini</DisplayName>
    <Properties/>
    <Add>
        <Headers/>
        <QueryParams/>
        <FormParams/>
    </Add>
    <Set>
        <Headers>
            <Header name="api_key">{private.gemini_apikey}</Header>

            <Header name="X-Max-Output-Tokens">{verifyapikey.VA-VerifyApiKey.apiproduct.operation.attributes.max_output_tokens}</Header>

            <Header name="X-Model-Armor-Template-Url">{verifyapikey.VA-VerifyApiKey.apiproduct.ModelArmorTemplatePath}</Header>
        </Headers>
        <QueryParams/>
        <FormParams/>
        <Path/>
        <Payload contentType="application/json">
            {
                "model": "{urirequest.model}",
                "prompt":"{urirequest.prompt}"
            }
        </Payload>
    </Set>
    <IgnoreUnresolvedVariables>true</IgnoreUnresolvedVariables>
    <AssignTo createNew="false" transport="http" type="request"/>
</AssignMessage>